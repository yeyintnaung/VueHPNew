<template>

    <div v-bind:class="ffonts">
        <header class="bg-image bg-image-2 well-inset-3 page-header">

            <!--RD Navbar-->
            <div class="rd-navbar-wrap">
                <nav class="rd-navbar top-panel-none-items" data-layout="rd-navbar-fixed" data-hover-on="false"
                     data-stick-up="false" data-sm-layout="rd-navbar-fullwidth" data-md-layout="rd-navbar-static">
                    <div class="rd-navbar-top-panel">
                        <div class="rd-navbar-inner">
                            <button data-rd-navbar-toggle=".list-inline, .fa-envelope, .fa-phone, .material-icons-shopping_cart"
                                    class="rd-navbar-collapse-toggle"><span></span></button>
                            <a href="/cdn-cgi/l/email-protection#a98a" class="fa-envelope"><span class="__cf_email__"
                                                                                                 data-cfemail="86e2e3ebe9ebe7efeac6e2e3ebe9eaefe8eda8e9f4e1">[email&#160;protected]</span></a><a
                                href="callto:#" class="fa-phone">+1 (126) 598-89-75</a>
                            <ul class="list-inline pull-right">
                                <li><a href="#" class="fa-facebook"></a></li>
                                <li><a href="#" class="fa-pinterest-p"></a></li>
                                <li><a href="#" class="fa-twitter"></a></li>
                                <li><a href="#" class="fa-google-plus"></a></li>
                                <li><a href="#" class="fa-instagram"></a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="rd-navbar-inner">

                        <!--RD Navbar Panel-->
                        <div class="rd-navbar-panel col-sm-2">

                            <!--RD Navbar Toggle-->
                            <button data-rd-navbar-toggle=".rd-navbar" class="rd-navbar-toggle"><span></span></button>
                            <!--END RD Navbar Toggle-->

                            <!--RD Navbar Brand-->
                            <div class="rd-navbar-brand"><a href="index.html" class="brand-name"><img
                                    src="../../assets/images/logo-2.png" class="logo_img" alt="" style=""></a>
                            </div>
                            <!--END RD Navbar Brand-->
                        </div>
                        <!--END RD Navbar Panel-->

                        <div class="rd-navbar-nav-wrap col-sm-8" style="float:left;">


                            <!--<div class="rd-navbar-search">-->
                                <!--<form action="search.php" method="GET" class="rd-navbar-search-form">-->
                                    <!--<label class="rd-navbar-search-form-input">-->
                                        <!--<input type="text" name="s" placeholder="Search.." autocomplete="off">-->
                                    <!--</label>-->
                                    <!--<button type="submit" class="rd-navbar-search-form-submit"></button>-->
                                <!--</form>-->
                                <!--<span class="rd-navbar-live-search-results"></span>-->
                                <!--<button data-rd-navbar-toggle=".rd-navbar-search, .rd-navbar-live-search-results"-->
                                        <!--class="rd-navbar-search-toggle"></button>-->
                            <!--</div>-->
                            <!--<div class="rd-navbar-search">-->
                                <!--<form action="search.php" method="GET" class="rd-navbar-search-form">-->
                                    <!--<label class="rd-navbar-search-form-input">-->
                                        <!--<input type="text" name="s" placeholder="Search.." autocomplete="off">-->
                                    <!--</label>-->
                                    <!--<button type="submit" class="rd-navbar-search-form-submit"></button>-->
                                <!--</form>-->
                                <!--<span class="rd-navbar-live-search-results"></span>-->
                                <!--<button data-rd-navbar-toggle=".rd-navbar-search, .rd-navbar-live-search-results"-->
                                        <!--class="rd-navbar-search-toggle"></button>-->
                            <!--</div>-->
                            <!--END RD Navbar Search-->


                            <!--RD Navbar Nav-->
                            <ul class="rd-navbar-nav">
                                <li><a href="./">Home</a></li>
                                <li><a href="#">Elements</a>

                                    <!--RD Navbar Dropdown-->
                                    <ul class="rd-navbar-dropdown">
                                        <li><a href="accourdions_tabs.html">Tabs & Accordions</a></li>
                                        <li><a href="typography.html">Typography</a></li>
                                        <li><a href="forms.html">Forms</a></li>
                                        <li><a href="buttons.html">Buttons</a></li>
                                        <li><a href="grid.html">Grid</a></li>
                                        <li><a href="icons.html">Icons</a></li>
                                        <li><a href="tables.html">Tables</a></li>
                                        <li><a href="progress_bars.html">Progress bars</a></li>
                                    </ul>
                                    <!--END RD Navbar Dropdown-->

                                </li>
                                <li><a href="#">Features</a>
                                    <ul class="rd-navbar-dropdown">
                                        <li><a href="index-parallax.html">Header Parallax</a></li>
                                        <li><a href="index-2.html">Header Transparent</a></li>
                                        <li><a href="index-cent.html">Header Center, Footer Light</a></li>
                                        <li><a href="index-min.html">Header Minimal, Footer Light</a></li>
                                        <li><a href="index-topbar.html">Header Corporate</a></li>
                                        <li><a href="index-sidebar.html">Header Hamburger Menu</a></li>
                                        <li><a href="index-cent-dark.html">Footer Center Dark</a></li>
                                        <li><a href="index-min-dark.html">Footer Minimal Dark</a></li>
                                        <li><a href="index-wid.html">Footer Widget Light</a></li>
                                        <li><a href="index-wid-dark.html">Footer Widget Dark</a></li>
                                    </ul>
                                </li>
                                <li class="active"><a href="#">Extras</a>
                                    <ul class="rd-navbar-dropdown">
                                        <li><a href="404.html">404</a></li>
                                        <li><a href="coming.html">Coming soon</a></li>
                                        <li><a href="login.html">Login page</a></li>
                                        <li><a href="maintenance.html">Maintenance page</a></li>
                                        <li><a href="register.html">Register page</a></li>
                                        <li><a href="search-res.html">Search results page</a></li>
                                        <li><a href="terms.html">Terms of Service</a></li>
                                    </ul>
                                </li>
                                <li class="dropdown-megamenu"><a href="#">Pages</a>

                                    <!--RD Navbar Megamenu-->
                                    <ul class="rd-navbar-megamenu">
                                        <li>
                                            <p>Pages</p>
                                            <ul>
                                                <li><a href="index-2.html">Home 2</a></li>
                                                <li><a href="about.html">About Us</a></li>
                                                <li><a href="our-team.html">Our Team</a></li>
                                                <li><a href="team-member.html">Team member profile</a></li>
                                                <li><a href="contact_us.html">Contact Us</a></li>
                                                <li><a href="contact_us_2.html">Contact Us 2</a></li>
                                                <li><a href="pricing.html">Pricing</a></li>
                                                <li><a href="services.html">Services page</a></li>
                                                <li><a href="clients.html">Clients Page</a></li>
                                                <li><a href="faq.html">FAQ Page</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <p>Pages 2</p>
                                            <ul>
                                                <li><a href="left_sidebar.html">With left sidebar</a></li>
                                                <li><a href="right_sidebar.html">With right sidebar</a></li>
                                                <li><a href="no_sidebar.html">Without sidebar</a></li>
                                                <li><a href="blog_default.html">Default Blog</a></li>
                                                <li><a href="blog_columns_2.html">2 Columns Blog</a></li>
                                                <li><a href="blog_columns_3.html">3 Columns Blog</a></li>
                                                <li><a href="blog_archive.html">Archive page</a></li>
                                                <li><a href="blog_post.html">Post page</a></li>
                                                <li><a href="timeline.html">Timeline</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <p>Layouts</p>
                                            <ul>
                                                <li><a href="index-2.html">Header Transparent</a></li>
                                                <li><a href="index-cent.html">Header Center, Footer Light</a></li>
                                                <li><a href="index-min.html">Header Minimal, Footer Light</a></li>
                                                <li><a href="index-topbar.html">Header Corporate</a></li>
                                                <li><a href="index-sidebar.html">Header Hamburger Menu</a></li>
                                                <li><a href="index-cent-dark.html">Footer Center Dark</a></li>
                                                <li><a href="index-min-dark.html">Footer Minimal Dark</a></li>
                                                <li><a href="index-wid.html">Footer Widget Light</a></li>
                                                <li><a href="index-wid-dark.html">Footer Widget Dark</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <p>E-commerce</p>
                                            <ul>
                                                <li><a href="shop-catalog.html">Product catalog</a></li>
                                                <li><a href="shop-product.html">Single product</a></li>
                                                <li><a href="shop-cart.html">Shopping cart</a></li>
                                                <li><a href="shop-checkout.html">Checkout</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                    <!--END RD Navbar Megamenu-->
                                </li>
                                <li><a href="#">Blog</a>
                                    <ul class="rd-navbar-dropdown">
                                        <li><a href="blog_default.html">Default Blog</a></li>
                                        <li><a href="blog_columns_2.html">2 Columns Blog</a></li>
                                        <li><a href="blog_columns_3.html">3 Columns Blog</a></li>
                                        <li><a href="blog_archive.html">Archive page</a></li>
                                        <li><a href="blog_post.html">Post page</a></li>
                                        <li><a href="timeline.html">Timeline <span class="marked">hot</span></a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Gallery</a>
                                    <ul class="rd-navbar-dropdown">
                                        <li><a href="gallery-1.html">Grid Padding Gallery</a></li>
                                        <li><a href="gallery-2.html">Grid No Padding Gallery</a></li>
                                        <li><a href="gallery-3.html">Grid Masonry</a></li>
                                        <li><a href="gallery-4.html">Grid Cobbles</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Shop</a>

                                    <ul class="rd-navbar-dropdown">
                                        <li><a href="shop-catalog.html">Product catalog</a></li>
                                        <li><a href="shop-product.html">Single product</a></li>
                                        <li><a href="shop-cart.html">Shopping cart</a></li>
                                        <li><a href="shop-checkout.html">Checkout</a></li>
                                    </ul>

                                </li>
                                <li>
                                    <a href="#" class="lan_cl" @click="cc(lang='mm')">zaw</a>

                                </li>
                                <li>
                                    <a href="#" class="lan_cl" v-if="lang=='mm'" @click="zawgyi()">mm</a>

                                </li>
                                <li>
                                    <a href="#" class="lan_cl" @click="cc(lang='en')">en</a>

                                </li>

                            </ul>
                            <!--END RD Navbar Nav-->
                        </div>
                        <!--<div class="col-sm-2">-->
                               <!--<button class="btn btn-info">mm</button>-->
                        <!--<button class="btn btn-info">en</button>-->
                        <!--</div>-->
                    </div>
                </nav>
            </div>
            <!--END RD Navbar-->

            <!--Start section-->
            <section class="well well-sm well-sm--inset-2" id="login">
                <div class="container text-center">
                    <div class="row flow-offset-1">
                        <div class="col-md-6 col-md-offset-3 btn-shadow inset-sm-min bg-white">
                            <h5 class="text-center">Sign in</h5>
                            <template v-if="status == 'jfalse'">
                                <div>
                                    <div class="alert alert-danger">
                                        <strong>{{error}}</strong>
                                    </div>
                                </div>
                            </template>
                            <form class="row label-insets" v-on:submit.prevent="gologin">
                                <div class="form-group col-sm-12 text-left">
                                    <label for="exampleInputText2" class="text-uppercase ">{{$lang.messages.default.auth.phone}}</label>
                                    <input type="text" v-model="phone" id="exampleInputText2" class="form-control">
                                    <template v-if="status === 'vfalse'">
                                        <template v-if="error.phone !== undefined">
                                          <span class="help-block">
                                          <strong v-for="ep in error.phone" style="color: #ff292996; font-size: 15px;">
                                          {{ep}}
                                          </strong>
                                          </span>
                                        </template>
                                    </template>

                                </div>
                                <div class="form-group col-sm-6 text-left">
                                    <label for="exampleInputPass1"
                                           class="text-uppercase ">{{$lang.messages.default.auth.password}}</label>
                                    <input type="password" v-model="password" id="exampleInputPass1"
                                           class="form-control">
                                    <template v-if="status === 'vfalse'">
                                        <template v-if="error.phone !== undefined">
                                          <span class="help-block">
                                                <strong v-for="eps in error.password"
                                                        style="color: #ff292996; font-size: 15px;">
                                                    {{eps}}
                                                </strong>
                                             </span>
                                        </template>
                                    </template>
                                </div>
                                <div class="col-sm-6">
                                    <button type="submit" class="btn btn-primary btn-xs round-xl btn-block form-el-offset-1">
                                        {{$lang.messages.default.auth.login}}
                                    </button>
                                </div>
                            </form>
                                <div class="col-xs-12 text-center">
                                    <p class="small text-uppercase text-light-clr  max-width separate">
                                        or</p>
                                    <div class="btn-elements-group-2">
                                        <!--<a href="#" class="btn btn-info btn-xs round-small btn-icon-left btn-min-width"><span-->
                                            <!--class="icon fa-facebook"></span> facebook</a><a href="#"-->
                                                                                            <!--class="btn btn-info-2 btn-xs round-small btn-icon-left btn-min-width"><span-->
                                            <!--class="icon fa-twitter"></span> Twitter</a><a href="#"-->
                                                                                          <!--class="btn btn-danger btn-xs round-small btn-icon-left btn-min-width"><span-->
                                            <!--class="icon fa-google-plus"></span> Google+</a>-->
                                        <div class="col-sm-12">
                                            <button type="submit" @click="goregisterform"
                                                    class="btn btn-info btn-xs round-xl btn-block form-el-offset-1">
                                                {{$lang.messages.default.auth.register}}
                                            </button>
                                        </div>
                                    </div>
                                </div>

                        </div>
                    </div>
                    <a href="/" class="btn btn-default btn-default--mod-1 btn-sm round-xl offset-2">Back to
                        homepage</a>
                </div>
            </section>
            <!--End section-->
        </header>
    </div>

</template>
<style scoped>
    @import "../../assets/css/style.css";


</style>
<script>
    import injects from '@/mixins/injects.js'
    import change_lang from '@/mixins/change_lang.js'
    import axios from 'axios'

    export default{
        mixins:['change_lang'],

        data(){
            return {
                phone: '',
                password: '',
                error: '',
                name: "",
                hastoken: '',
                status: 'true',
                password_confirmation: '',
                success: '',
                lang: 'mm',
                type: this.$route.params.type
            }
        },
        methods: {
            //to sert external js file
            goregisterform:function(){
                window.location = '../register';
            },

            gologin: function () {
                var self = this;
                self.error = '';
                self.status = '';
                return axios({
                    method: 'post',
                    url: 'http://localhost/userHpbk/login',
                    cache: false,
                    data: {
                        phone: self.phone,
                        password: self.password
                    }, headers: {
                        'Content-type': 'application/json'
                    }
                }).then(function (response) {
                    if (response.data.success === 'vfalse') {
                        self.status = 'vfalse';
                        self.error = response.data.error;
                    } else if (response.data.success === 'jfalse') {
                        self.status = 'jfalse';
                        self.error = response.data.error;
                    } else {
                        localStorage.setItem("token", response.data.data.token);
                        console.log(localStorage.getItem("token"));
                        window.location = '/all_project';
                    }

                });

            },
            goregister: function () {
                var self = this;
                self.error = '';
                self.success = '';
                return axios({
                    method: 'post',
                    url: 'http://www.hivephing.com/constructback/api/register',
                    data: {
                        phone: self.phone,
                        password: self.password,
                        password_confirmation: self.password_confirmation,
                        name: self.name
                    }, headers: {
                        'Content-type': 'application/json'
                    }
                }).then(function (response) {
                    console.log(response.data);
                    if (response.data.success == false) {
                        self.success = false;
                        self.error = response.data.data;
                        console.log(self.error.phone);
                    }
                    if (response.data.success == true) {
                        localStorage.setItem('token', response.data.data);
                        window.location = '/dashboard/formq/all';
                    }
                });
            },

            check: function () {
                var self = this;
                return axios({
                    method: 'post',
                    url: 'http://www.hivephing.com/constructback/api/dashboard',
                    data: {
                        token: localStorage.getItem("token"),
                    }, headers: {
                        'Content-type': 'application/json'
                    }
                }).then(function (response) {
                    self.hastoken = response.data[0];
                    if (self.hastoken === 'true') {
                        window.location = '/all_project';

                    }
                    console.log(response.data[0]);
                });


            }
        },
        created() {

//            this.check();

        }
    }
</script>

